(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"S+E6":function(e,t,a){"use strict";a.r(t);var r=a("/MKj"),n=a("4pai"),o=a("q1tI"),l=a.n(o),i=a("17x9"),s=a.n(i),c=a("LvDl"),u=a.n(c),m=a("JvxN"),f=a("/KzK"),p=a("+o7/");function d(e){return function(t){return new Promise((function(a,r){m.a.patch("/users/".concat(e.id),f.a.send(e)).then((function(e){var r;return t((r=f.a.fetch(e.data.user),{type:p.b,payload:r})),a()})).catch((function(e){var t=e.response.status,a={error:null,statusCode:t};if(422===t){var n={errors:e.response.data,replace:!1,searchStr:"",replaceStr:""};a.error=f.a.resetValidationFields(n)}else 401===t&&(a.error=e.response.data.message);return r(a)}))}))}}var h=a("pb+D"),b={user:s.a.object.isRequired,errors:s.a.object.isRequired,onChange:s.a.func.isRequired,onSubmit:s.a.func.isRequired},v=function(e){var t=e.user,a=e.errors,r=e.onChange,n=e.onSubmit;return l.a.createElement("form",{onSubmit:function(e){return n(e)}},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"name",className:"col-sm-2 col-form-label"},"Name"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",id:"name",name:"name",className:"form-control ".concat(a.has("name")&&"is-invalid"),placeholder:"Full Name",value:t.name||"",onChange:function(e){return r(e.target.name,e.target.value)}}),a.has("name")&&l.a.createElement("div",{className:"invalid-feedback"},a.first("name")))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-2 col-form-label"},"Email"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control ".concat(a.has("email")&&"is-invalid"),placeholder:"Email",value:t.email||"",onChange:function(e){return r(e.target.name,e.target.value)}}),a.has("email")&&l.a.createElement("div",{className:"invalid-feedback"},a.first("email")))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"phone",className:"col-sm-2 col-form-label"},"Phone"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",id:"phone",name:"phone",className:"form-control ".concat(a.has("phone")&&"is-invalid"),placeholder:"Phone",value:t.phone||"",onChange:function(e){return r(e.target.name,e.target.value)}}),a.has("phone")&&l.a.createElement("div",{className:"invalid-feedback"},a.first("phone")))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"about",className:"col-sm-2 col-form-label"},"About"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("textarea",{id:"about",name:"about",className:"form-control ".concat(a.has("about")&&"is-invalid"),rows:"3",placeholder:"About",value:t.about||"",onChange:function(e){return r(e.target.name,e.target.value)}}),a.has("about")&&l.a.createElement("div",{className:"invalid-feedback"},a.first("about")))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-10 ml-auto"},l.a.createElement("button",{disabled:a.any(),type:"submit",className:"btn btn-primary"},"Update"))))};v.displayName="UserFrom",v.propTypes=b;var y=v;function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=function(e){function t(e){var a,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(n=j(t).call(this,e))||"object"!==g(n)&&"function"!=typeof n?S(r):n).validator=new h.a({name:"required|min:3",email:"required|email",phone:"min:8|numeric",about:"min:10|max:1024"});var o=a.props.user.toJson();return a.state={user:o,errors:a.validator.errors},a.handleChange=a.handleChange.bind(S(a)),a.handleSubmit=a.handleSubmit.bind(S(a)),a}var a,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),a=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.user.toJson();u.a.isEqual(this.state.user,t)||this.setState({user:t})}},{key:"handleChange",value:function(e,t){var a=this,r=this.validator.errors;this.setState({user:N({},this.props.user,C({},e,t))}),r.remove(e),this.validator.validate(e,t).then((function(){a.setState({errors:r})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.user,r=this.validator.errors;this.validator.validateAll(a).then((function(e){e?t.submit(a):t.setState({errors:r})}))}},{key:"submit",value:function(e){var t=this;this.props.dispatch(d(e)).catch((function(e){var a=e.error,r=e.statusCode,n=t.validator.errors;422===r&&u.a.forOwn(a,(function(e,t){n.add(t,e)})),t.setState({errors:n})}))}},{key:"render",value:function(){return l.a.createElement("main",{className:"col-sm-9 ml-sm-auto col-md-10 pt-3",role:"main"},l.a.createElement("h1",null,"Profile"),l.a.createElement("section",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-9 col-sm-12"},l.a.createElement(y,E({},this.state,{onChange:this.handleChange,onSubmit:this.handleSubmit})))))}}])&&O(a.prototype,r),n&&O(a,n),t}(o.Component);C(k,"displayName","UserPage"),C(k,"propTypes",{user:s.a.object.isRequired,dispatch:s.a.func.isRequired});var q=k;t.default=Object(r.b)((function(e){return{user:new n.a(e.user)}}))(q)}}]);